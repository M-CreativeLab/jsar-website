# XSML

XSML is a markup language very similar to HTML. Its full name is eXtensible Spatial Markup Language, and it extends HTML by reusing some of its tags, such as `head`, `title`, `script`, `style`, `div`, and introduces additional tags for spatial representation, such as replacing `body` with `space` and using `cube` to represent a cube, among others.

Here is an example of XSML:

```xml
<xsml version="1.0">
  <head>
    <title>Rokid Jungle</title>
    <link id="model" rel="mesh" type="octstream/glb" href="./model/welcome.glb" />
    <script src="./lib/main.ts"></script>
  </head>
  <space>
    <mesh id="model" ref="model" selector="__root__" />
  </space>
</xsml>
```

## XSML Tags

Below is a brief explanation of the current XSML tags.

### xsml

The `<xsml>` tag is the root tag of XSML, and it has the following attribute:

- `version`: Indicates the version of XSML, currently only supports `1.0`.

### head

The `<head>` tag is used to define the header information of XSML. It has child tags such as `title`, `link`, `script`, and more.

#### title

The `<title>` tag is used to define the title of XSML, and its content is a string.

#### link

The `<link>` tag is used to define the link information in XSML. It has attributes like:

- `id`: Represents the unique identifier of the link, and its value is a string.
- `rel`: Indicates the relationship of the link, and its value is a string. Currently, only `mesh` is supported.
- `type`: Specifies the type of the link, and its value is a string. Currently, only `octstream/glb` is supported.

In HTML, the `<link>` tag is typically used to reference CSS files. However, in XSML, the `<link>` tag is used to reference 3D model files, such as `glb` format 3D model files.

In future versions, we will also support using this tag to import SCSS and other model file formats. The specific support is as follows:

| `rel` | Description | Supported |
| --- | --- | --- |
| `mesh` | The 3D model used in the current document | Yes |
| `alternate` | Alternate document for the current document | No |
| `author` | Author of the current document | No |
| `bookmark` | Bookmark for the current document | No |
| `canonical` | Canonical address of the current document | No |
| `dns-prefetch` | DNS prefetch for the current document | No |
| `help` | Help for the current document | No |
| `icon` | Icon for the current document | No |
| `license` | License for the current document | No |
| `manifest` | Manifest for the current document | No |
| `modulepreload` | Module preload for the current document | No |
| `next` | Next document for the current document | No |
| `pingback` | PingBack for the current document | No |
| `preconnect` | Preconnect for the current document | No |
| `prefetch` | Prefetch for the current document | No |
| `preload` | Preload for the current document | No |
| `prerender` | Prerender for the current document | No |
| `prev` | Previous document for the current document | No |
| `search` | Search for the current document | No |
| `stylesheet` | Stylesheet for the current document | No |
| `tag` | Tag for the current document | No |

#### script

The `<script>` tag is used to define script information in XSML, and it has the following attribute:

- `src`: Represents the URL of the script, and its value is a string.

In XSML, the `<script>` tag can be used to import both JavaScript and TypeScript files. If you are importing a TypeScript file, you can specify the file extension as `.ts` in the `src` attribute. Importing TypeScript scripts does not require additional code compilation.

In the current version, XSML does not yet support CommonJS or ECMAScript Module systems. However, you can achieve cross-file referencing by attaching the global variable `global.spaceDocument`. This approach is not recommended as it can decrease code readability.

We plan to add support for ECMAScript Modules in JSAR in the future.

#### style

The `<style>` tag is used to define style information in XSML. It serves a similar purpose to the `style` tag in HTML and has the following attribute:

- `type`: Specifies the style's type, and its value is a string. Currently, only `text/scss` is supported.

Here's an example of a `<style>` tag in XSML:

```xml
<xsml version="1.0">
  <head>
    <style type="text/scss">
      @material yellow {
        diffuse-color: #fdd276;
        backface-culling: false;
        side-orientation: frontside;
      }
      #lion {
        rotation: 0 0 0;
      }
      #lion_body {
        material: "yellow";
        position: 0 -30 -60;
      }
      #lion_head {
        y: 60;
        z: -50;
      }
      #lion_face {
        material: "yellow";
        position: 0 0 135;
      }
      #lion_mane {
        position: 0 -10 80;
      }
    </style>
  </head>
  <space>
    <!-- Spatial structure -->
  </space>
</xsml>
```

You can see that by using the `<style>` tag's content, you can define styles just like CSS. You can find elements using CSS selectors and apply styles to those selected elements. The difference is that you're now defining 3D styles instead of flat styles.

For example, we use the syntax of `@font-family` and `@keyframes` to define materials in 3D. In the `<material>` tag, you can set material types, colors, textures, and more. Then, in specific elements, you can use the `material` attribute to apply the corresponding material definition.

Similarly, we have extended the original style definitions by adding properties like `position`, `rotation`, `scale`, etc., to define the position, rotation, and scale of 3D elements.

> Note: The current version only supports querying by id, and later versions will also support CSS queries by element tag and class.

> For more information about the `<style>` tag, you can refer to [SCSS](./basic-concepts/intro-scss).

### space

The `<space>` tag is used to define the spatial structure of XSML. Its child tags include `mesh`, `cube`, `sphere`, `cylinder`, `cone`, `plane`, `text`, `image`, `video`, `audio`, etc.

#### mesh

The `<mesh>` tag is used to define XSML mesh elements. It has the following attributes:

- `id`: Represents the unique identifier of the mesh element, with its value being a string.
- `ref`: Represents the reference of the mesh element, with its value as a string, currently only supporting `model`.
- `selector`: Represents the selector of the mesh element, with its value being a string.

This tag is used to render 3D model files imported via the `<link>` tags in the `<head>` tag into the space. The `ref` attribute specifies the id of the imported 3D model file, and the `selector` attribute specifies the node of the imported 3D model file.

#### cube

The `<cube>` tag is used to define XSML cube elements. It has the following attributes:

- `id`: Represents the unique identifier of the cube element, with its value being a string.
- `width`: Represents the width of the cube element, with its value being a number.
- `height`: Represents the height of the cube element, with its value being a number.
- `depth`: Represents the depth of the cube element, with its value being a number.
- `size`: Represents the size of the cube element, with its value being a number.

This tag is used to define a cube element, with the `width`, `height`, and `depth` attributes specifying the width, height, and depth of the cube element.

#### plane

The `<plane>` tag is used to define XSML plane elements. It has the following attributes:

- `id`: Represents the unique identifier of the plane element, with its value being a string.
- `width`: Represents the width of the plane element, with its value being a number.
- `height`: Represents the height of the plane element, with its value being a number.
- `size`: Represents the size of the plane element, with its value being a number.

This tag is used to define a plane element, with the `width` and `height` attributes specifying the width and height of the plane element.

#### sphere

The `<sphere>` tag is used to define XSML sphere elements. It has the following attributes:

- `id`: Represents the unique identifier of the sphere element, with its value being a string.
- `segments`: Represents the number of segments of the sphere element, with its value being a number.
- `diameter`: Represents the diameter of the sphere element, with its value being a number.
- `diameterX`: Represents the X-axis diameter of the sphere element, with its value being a number.
- `diameterY`: Represents the Y-axis diameter of the sphere element, with its value being a number.
- `diameterZ`: Represents the Z-axis diameter of the sphere element, with its value being a number.
- `arc`: Represents the arc of the sphere element, with its value being a number.
- `slice`: Represents the number of slices of the sphere element, with its value being a number.

This tag is used to define a sphere element, with the `segments` attribute specifying the number of segments, and the `diameter`, `diameterX`, `diameterY`, `diameterZ`, `arc`, and `slice` attributes specifying the diameter, dimensions, arc, and slices of the sphere element.

#### cylinder

The `<cylinder>` tag is used to define XSML cylinder elements. It has the following attributes:

- `id`: Represents the unique identifier of the cylinder element, with its value being a string.
- `height`: Represents the height of the cylinder element, with its value being a number.
- `diameter`: Represents the diameter of the cylinder element, with its value being a number.
- `diameterTop`: Represents the top diameter of the cylinder element, with its value being a number.
- `diameterBottom`: Represents the bottom diameter of the cylinder element, with its value being a number.
- `tessellation`: Represents the number of tessellations of the cylinder element, with its value being a number.

This tag is used to define a cylinder element, with the `height` attribute specifying the height, and the `diameter`, `diameterTop`, `diameterBottom`, and `tessellation` attributes specifying the diameters and tessellations of the cylinder element.

#### capsule

The `<capsule>` tag is used to define XSML capsule elements. It has the following attributes:

- `id`: Represents the unique identifier of the capsule element, with its value being a string.
- `height`: Represents the height of the capsule element, with its value being a number.
- `radius`: Represents the radius of the capsule element, with its value being a number.
- `radiusTop`: Represents the top radius of the capsule element, with its value being a number.
- `radiusBottom`: Represents the bottom radius of the capsule element, with its value being a number.

This tag is used to define a capsule element, with the `height` attribute specifying the height, and the `radius`, `radiusTop`, and `radiusBottom` attributes specifying the radii of the capsule element.

#### torus

The `<torus>` tag is used to define XSML torus elements. It has the following attributes:

- `id`: Represents the unique identifier of the torus element, with its value being a string.
- `diameter`: Represents the diameter of the torus element, with its value being a number.
- `thickness`: Represents the thickness of the torus element, with its value being a number.
- `tessellation`: Represents the number of tessellations of the torus element, with its value being a number.

#### bound

The `<bound>` tag is used to define XSML bounding box elements. It represents the bounding box of its parent element, and its attributes include:

- `id`: Represents the unique identifier of the bounding box element, with its value being a string.

This tag is used to define a bounding box element, and its size is calculated based on its child elements. Internally, it is a Babylon.js TransformNode object.
